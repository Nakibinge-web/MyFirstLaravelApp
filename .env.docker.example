# ============================================
# Docker Environment Configuration
# ============================================
# This file contains environment variables for running the application in Docker.
# Copy this file to .env.docker and update the values as needed.
# Usage: docker-compose --env-file .env.docker up

# ============================================
# Application Settings
# ============================================
APP_NAME="Financial Tracker"
APP_ENV=local
# Generate a new key with: docker-compose exec php php artisan key:generate
APP_KEY=
APP_DEBUG=true
# Use localhost for local development, or your domain for production
APP_URL=http://localhost

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

BCRYPT_ROUNDS=4

# ============================================
# Logging Configuration
# ============================================
LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

# ============================================
# Database Configuration (MySQL in Docker)
# ============================================
# Use 'mysql' as the host - this is the Docker service name
DB_CONNECTION=mysql
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=financial_tracker
DB_USERNAME=laravel
DB_PASSWORD=secret

# Root password for MySQL (used by phpMyAdmin and initial setup)
DB_ROOT_PASSWORD=root

# ============================================
# Session Configuration
# ============================================
# Using Redis for sessions in Docker environment for better performance
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

# ============================================
# Broadcasting & Queue Configuration
# ============================================
BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local
# Using Redis for queues in Docker environment
QUEUE_CONNECTION=redis

# ============================================
# Cache Configuration (Redis in Docker)
# ============================================
# Using Redis for caching in Docker environment for better performance
CACHE_STORE=redis
CACHE_PREFIX=fintrack_

# Cache TTL Settings (in seconds)
CACHE_TTL_DASHBOARD=300
CACHE_TTL_CATEGORIES=3600
CACHE_TTL_BUDGETS=300
CACHE_TTL_GOALS=300
CACHE_TTL_MONTHLY_STATS=600
CACHE_TTL_REPORTS=900
CACHE_TTL_CURRENCY=86400

# Query Cache
QUERY_CACHE_ENABLED=true
QUERY_CACHE_TTL=300

# ============================================
# Redis Configuration (Redis in Docker)
# ============================================
# Use 'redis' as the host - this is the Docker service name
REDIS_CLIENT=phpredis
REDIS_HOST=redis
REDIS_PASSWORD=null
REDIS_PORT=6379

# ============================================
# Memcached Configuration
# ============================================
MEMCACHED_HOST=127.0.0.1

# ============================================
# Mail Configuration
# ============================================
# Using 'log' driver for development - emails will be logged instead of sent
# For production, configure SMTP settings or use a mail service
MAIL_MAILER=log
MAIL_SCHEME=null
MAIL_HOST=127.0.0.1
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"

# ============================================
# AWS Configuration (Optional)
# ============================================
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# ============================================
# Vite Configuration (Asset Compilation)
# ============================================
# Vite dev server runs in the Node.js container
VITE_APP_NAME="${APP_NAME}"
# Host must be 0.0.0.0 to allow connections from outside the container
VITE_HOST=0.0.0.0
VITE_PORT=5173
# HMR (Hot Module Replacement) host should be localhost for browser access
VITE_HMR_HOST=localhost

# ============================================
# Docker-Specific Settings
# ============================================
# These settings are used by docker-compose.yml

# PHP-FPM Settings
PHP_MEMORY_LIMIT=512M
PHP_UPLOAD_MAX_FILESIZE=20M
PHP_POST_MAX_SIZE=20M
PHP_MAX_EXECUTION_TIME=300

# MySQL Settings
MYSQL_MAX_CONNECTIONS=200
MYSQL_INNODB_BUFFER_POOL_SIZE=256M

# Redis Settings
REDIS_MAXMEMORY=256mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# phpMyAdmin Settings
PMA_UPLOAD_LIMIT=20M

# ============================================
# Notes
# ============================================
# 1. After copying this file to .env.docker, run:
#    docker-compose exec php php artisan key:generate
#
# 2. Service names (mysql, redis) are used as hostnames because
#    Docker Compose creates a network where services can communicate
#    using their service names.
#
# 3. For production deployment:
#    - Set APP_ENV=production
#    - Set APP_DEBUG=false
#    - Use strong passwords for DB_PASSWORD and DB_ROOT_PASSWORD
#    - Configure proper mail settings
#    - Consider using Docker secrets for sensitive data
#
# 4. Port mappings (defined in docker-compose.yml):
#    - Application: http://localhost:80
#    - phpMyAdmin: http://localhost:8080
#    - Vite Dev Server: http://localhost:5173
#    - MySQL: localhost:3306 (optional, for external tools)
#    - Redis: localhost:6379 (optional, for external tools)
